<div class="home">
  <h1 class="text-center main-title m-0">COVID-19 IN ONTARIO, CANADA</h1>

  <div class="search-form">
    <form [formGroup]="searchForm">
      <div class="d-flex">
        <div class="d-flex with-icon-left form-group flex-grow-1 mr-1">
          <input type="text" class="form-control" placeholder="Your Current Location">
          <div class="icon-container">
            <span><i class="fas fa-location-arrow"></i></span>
          </div>
        </div>
        <div class="form-group w-25">
          <input type="text" class="form-control" value="25 km">
        </div>
      </div>

      <div class="advance-filter" [ngClass]="{'d-block': showAdvanceFilter, 'd-none': !showAdvanceFilter}">
        <div class="d-flex">
          <div class="d-flex with-icon-left form-group flex-fill mr-1">
            <input type="text" class="form-control" placeholder="From">
            <div class="icon-container">
              <span><i class="fas fa-calendar-alt"></i></span>
            </div>
            </div>
            <div class="d-flex with-icon-left form-group flex-fill">
              <input type="text" class="form-control" placeholder="To">
              <div class="icon-container">
              <span><i class="fas fa-calendar-alt"></i></span>
            </div>
          </div>
        </div>

        <div class="d-flex">
          <div class="form-group flex-grow-1 mr-3">
            <label class="m-0">Age</label>
            <ng5-slider
              [(value)]="searchForm.get('minAge').value"
              [(highValue)]="searchForm.get('maxAge').value"
              [options]="sliderOptions"
              (valueChange)="updateForm('minAge', $event)"
              (highValueChange)="updateForm('maxAge', $event)"></ng5-slider>
          </div>
          <div class="form-group w-25 gender">
            <label class="d-block text-center m-0">Gender</label>
            <div class="d-flex">
              <button [ngClass]="{'selected': searchForm.get('gender').value == 'female'}" class="flex-grow-1" type="button" (click)="updateForm('gender', 'female')"><i class="fas fa-female"></i></button>
              <button [ngClass]="{'selected': searchForm.get('gender').value == 'male'}" class="flex-grow-1" type="button" (click)="updateForm('gender', 'male')"><i class="fas fa-male"></i></button>
            </div>
          </div>
        </div>

        <div class="d-flex">
          <div class="form-group flex-fill mr-1">
            <select class="form-control" formControlName="acquisition">
              <option value="">Acquisition</option>
              <option *ngFor="let item of selectOptions.acquisition; let i = index; trackBy: appService.trackByFn;" [value]="item.key">{{item.name}}</option>
            </select>
          </div>
          <div class="form-group flex-fill">
            <select class="form-control" formControlName="outcome">
              <option value="" disabled>Outcome</option>
              <option *ngFor="let item of selectOptions.outcome; let i = index; trackBy: appService.trackByFn;" [value]="item.key">{{item.name}}</option>
            </select>
          </div>
        </div>

        <div class="form-check form-group">
          <input class="form-check-input" type="checkbox" id="outbreakRelatedCheckBox" formControlName="isOutbreakRelated">
          <label class="form-check-label" for="outbreakRelatedCheckBox">
            Outbreak Related
          </label>
        </div>

        <div class="d-flex">
          <div class="form-group flex-fill mr-1">
            <button type="button" class="btn btn-primary btn-block" (click)="showAdvanceFilter = !showAdvanceFilter">Hide Filter <i class="fas fa-angle-up"></i></button>
          </div>
          <div class="form-group flex-fill">
            <button type="button" (click)="resetFilter()" class="btn btn-primary btn-block">Reset Filter <i class="fas fa-redo"></i></button>
          </div>
        </div>
      </div>

      <div [ngClass]="{'d-block': !showAdvanceFilter, 'd-none': showAdvanceFilter}">
        <button type="button" class="btn btn-primary btn-block" (click)="showAdvanceFilter = !showAdvanceFilter">Advance Filter</button>
      </div>
    </form>
  </div>

  <h3 class="mt-3 light-orange-color text-center chart-label">Current COVID-19 threat level in within 25km radius of your location is high.</h3>

  <div class="charts">
    <div class="row">
      <div class="col-lg-6">
        <app-gauge class="w-100" [chartId]="'riskChart'" [threatLevel]="reportsMetaData.threatLevel"></app-gauge>
      </div>
      <div class="col-lg-6 cases">
        <div class="d-block text-center">
          <span class="light-orange-color count" [countUp]="reportsMetaData.newCases" [options]="countOpts">0</span><br>
          <span class="light-orange-color label"><b>new cases</b></span><br>
          <span class="light-orange-color sub-label">(past 7 days)</span>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-6">
        <h3 class="text-center">Age</h3>
        <app-age-chart class="w-100" [chartId]="'agePieChart'" [data]="reportsMetaData.ages" [dataFields]="{value: 'count', category: 'Age_Group'}"></app-age-chart>
      </div>
      <div class="col-lg-6">
        <h3 class="text-center">Acquisition</h3>
        <app-acquisition-chart class="w-100" [chartId]="'acquisitionAgePieChart'" [data]="reportsMetaData.acquisition" [dataFields]="{value: 'count', category: 'Case_AcquisitionInfo'}"></app-acquisition-chart>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-6">
        <h3 class="text-center">Outcome</h3>
        <app-dounut class="w-100" [chartId]="'outcomeChart'"></app-dounut>
      </div>
      <div class="col-lg-6">
        <h3 class="text-center">Outbreak Related</h3>
        <app-outbreak-chart class="w-100" [chartId]="'outbreakChart'" [data]="reportsMetaData.outbreakRelates" [dataFields]="{value: 'count', category: 'Outbreak_Related'}"></app-outbreak-chart>
      </div>
    </div>
  </div>

</div>
